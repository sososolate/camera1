<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>摄像头切换示例</title>
</head>
<body>
    <h2>摄像头切换示例</h2>
    <video id="video" autoplay style="width: 100%; max-width: 600px;"></video>
    <button id="toggleCamera">切换摄像头</button>

    <script>
        let currentFacingMode = "user"; // 默认使用前置摄像头
        let videoElement = document.getElementById("video");

        function startCamera(facingMode) {
            navigator.mediaDevices.getUserMedia({
                video: { facingMode: facingMode }
            })
            .then(stream => {
                videoElement.srcObject = stream;
            })
            .catch(error => {
                console.log("摄像头访问失败: ", error);
            });
        }

        document.getElementById("toggleCamera").addEventListener("click", function() {
            currentFacingMode = (currentFacingMode === "user") ? "environment" : "user";
            startCamera(currentFacingMode);
        });

        // 页面加载时启动前置摄像头
        startCamera(currentFacingMode);
    </script>
</body>
</html>
